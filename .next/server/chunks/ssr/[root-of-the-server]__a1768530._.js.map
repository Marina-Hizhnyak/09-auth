{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/TagsMenu/TagsMenu.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"menuButton\": \"TagsMenu-module__9uIDiq__menuButton\",\n  \"menuContainer\": \"TagsMenu-module__9uIDiq__menuContainer\",\n  \"menuItem\": \"TagsMenu-module__9uIDiq__menuItem\",\n  \"menuLink\": \"TagsMenu-module__9uIDiq__menuLink\",\n  \"menuList\": \"TagsMenu-module__9uIDiq__menuList\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/marina/Projects/09-auth/types/note.ts"],"sourcesContent":["export interface Note {\n  id: string;\n  title: string;\n  content: string;\n  tag: NoteTag;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport type NoteTag = 'Todo' | 'Work' | 'Personal' | 'Meeting' | 'Shopping';\n\nexport const TAGS: readonly NoteTag[] = [\n  'Todo',\n  'Work',\n  'Personal',\n  'Meeting',\n  'Shopping',\n] as const;\n"],"names":[],"mappings":";;;;AAWO,MAAM,OAA2B;IACtC;IACA;IACA;IACA;IACA;CACD","debugId":null}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///Users/marina/Projects/09-auth/components/TagsMenu/TagsMenu.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport css from './TagsMenu.module.css';\nimport { TAGS } from '@/types/note';\n\nexport default function TagsMenu() {\n  const [open, setOpen] = useState(false);\n  const ref = useRef<HTMLDivElement>(null);\n  const pathname = usePathname();\n  const menuId = 'notes-menu';\n\n  useEffect(() => {\n    const onDown = (e: MouseEvent) => {\n      if (!ref.current) return;\n      if (!ref.current.contains(e.target as Node)) setOpen(false);\n    };\n    document.addEventListener('mousedown', onDown);\n    return () => document.removeEventListener('mousedown', onDown);\n  }, []);\n\n  useEffect(() => {\n    const onKey = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') setOpen(false);\n    };\n    document.addEventListener('keydown', onKey);\n    return () => document.removeEventListener('keydown', onKey);\n  }, []);\n\n  useEffect(() => {\n    setOpen(false);\n  }, [pathname]);\n\n  return (\n    <div ref={ref} className={css.menuContainer}>\n      <button\n        type=\"button\"\n        className={css.menuButton}\n        aria-haspopup=\"menu\"\n        aria-controls={menuId}\n        aria-expanded={open}\n        onClick={() => setOpen((v) => !v)}\n      >\n        Notes ▾\n      </button>\n\n      <ul id={menuId} role=\"menu\" className={css.menuList} hidden={!open}>\n        <li className={css.menuItem} role=\"none\">\n          <Link href=\"/notes/filter/All\" className={css.menuLink} role=\"menuitem\" onClick={() => setOpen(false)}>\n            All\n          </Link>\n        </li>\n        {TAGS.map((tag) => (\n          <li key={tag} className={css.menuItem} role=\"none\">\n            <Link\n              href={`/notes/filter/${encodeURIComponent(tag)}`}\n              className={css.menuLink}\n              role=\"menuitem\"\n              onClick={() => setOpen(false)}\n            >\n              {tag}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,MAAM,IAAA,+MAAM,EAAiB;IACnC,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,SAAS;IAEf,IAAA,kNAAS,EAAC;QACR,MAAM,SAAS,CAAC;YACd,IAAI,CAAC,IAAI,OAAO,EAAE;YAClB,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAW,QAAQ;QACvD;QACA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IACzD,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,CAAC;YACb,IAAI,EAAE,GAAG,KAAK,UAAU,QAAQ;QAClC;QACA,SAAS,gBAAgB,CAAC,WAAW;QACrC,OAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;IACvD,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,QAAQ;IACV,GAAG;QAAC;KAAS;IAEb,qBACE,8OAAC;QAAI,KAAK;QAAK,WAAW,yJAAG,CAAC,aAAa;;0BACzC,8OAAC;gBACC,MAAK;gBACL,WAAW,yJAAG,CAAC,UAAU;gBACzB,iBAAc;gBACd,iBAAe;gBACf,iBAAe;gBACf,SAAS,IAAM,QAAQ,CAAC,IAAM,CAAC;0BAChC;;;;;;0BAID,8OAAC;gBAAG,IAAI;gBAAQ,MAAK;gBAAO,WAAW,yJAAG,CAAC,QAAQ;gBAAE,QAAQ,CAAC;;kCAC5D,8OAAC;wBAAG,WAAW,yJAAG,CAAC,QAAQ;wBAAE,MAAK;kCAChC,cAAA,8OAAC,uKAAI;4BAAC,MAAK;4BAAoB,WAAW,yJAAG,CAAC,QAAQ;4BAAE,MAAK;4BAAW,SAAS,IAAM,QAAQ;sCAAQ;;;;;;;;;;;oBAIxG,qHAAI,CAAC,GAAG,CAAC,CAAC,oBACT,8OAAC;4BAAa,WAAW,yJAAG,CAAC,QAAQ;4BAAE,MAAK;sCAC1C,cAAA,8OAAC,uKAAI;gCACH,MAAM,CAAC,cAAc,EAAE,mBAAmB,MAAM;gCAChD,WAAW,yJAAG,CAAC,QAAQ;gCACvB,MAAK;gCACL,SAAS,IAAM,QAAQ;0CAEtB;;;;;;2BAPI;;;;;;;;;;;;;;;;;AAcnB","debugId":null}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///Users/marina/Projects/09-auth/lib/store/authStore.ts"],"sourcesContent":["\n'use client';\n\nimport { create } from 'zustand';\nimport type { User } from '@/types/user';\n\ninterface AuthStore {\n  user: User | null;\n  isAuthenticated: boolean;\n  setUser: (user: User | null) => void;\n  clearIsAuthenticated: () => void;\n}\n\nexport const useAuthStore = create<AuthStore>()((set) => ({\n  user: null,\n  isAuthenticated: false,\n  setUser: (user) =>\n    set({\n      user,\n      isAuthenticated: !!user,\n    }),\n  clearIsAuthenticated: () =>\n    set({\n      user: null,\n      isAuthenticated: false,\n    }),\n}));\n"],"names":[],"mappings":";;;;AAGA;AAFA;;AAYO,MAAM,eAAe,IAAA,kJAAM,IAAc,CAAC,MAAQ,CAAC;QACxD,MAAM;QACN,iBAAiB;QACjB,SAAS,CAAC,OACR,IAAI;gBACF;gBACA,iBAAiB,CAAC,CAAC;YACrB;QACF,sBAAsB,IACpB,IAAI;gBACF,MAAM;gBACN,iBAAiB;YACnB;IACJ,CAAC","debugId":null}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":["file:///Users/marina/Projects/09-auth/lib/api/api.ts"],"sourcesContent":["import axios from 'axios';\n\nconst baseURL = `${process.env.NEXT_PUBLIC_API_URL}/api`;\n\nexport const api = axios.create({\n  baseURL,\n  withCredentials: true,\n});"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU,6DAAmC,IAAI,CAAC;AAEjD,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IAC9B;IACA,iBAAiB;AACnB","debugId":null}},
    {"offset": {"line": 289, "column": 0}, "map": {"version":3,"sources":["file:///Users/marina/Projects/09-auth/lib/api/clientApi.ts"],"sourcesContent":["\n'use client';\n\nimport { api } from './api';\nimport type { Note } from '@/types/note';\nimport type { NoteTag } from '@/types/note';\nimport type { User } from '@/types/user';\n\n// ==== Нотатки ====\n\nexport interface FetchNotesParams {\n  page: number;\n  perPage: number;\n  search?: string;\n  tag?: NoteTag;\n}\n\nexport interface FetchNotesResponse {\n  notes: Note[];\n  totalPages: number;  \n}\n\nexport async function fetchNotes(\n  params: FetchNotesParams,\n): Promise<FetchNotesResponse> {\n  const { data } = await api.get<FetchNotesResponse>('/notes', {\n    params,\n  });\n  return data;\n}\n\nexport async function fetchNoteById(id: string): Promise<Note> {\n  const { data } = await api.get<Note>(`/notes/${id}`);\n  return data;\n}\n\nexport interface CreateNoteDto {\n  title: string;\n  content: string;\n  tag: NoteTag;\n}\n\nexport async function createNote(note: CreateNoteDto): Promise<Note> {\n  const { data } = await api.post<Note>('/notes', note);\n  return data;\n}\n\nexport async function deleteNote(id: string): Promise<Note> {\n  const { data } = await api.delete<Note>(`/notes/${id}`);\n  return data;\n}\n\n// ==== Auth ====\n\ninterface RegisterDto {\n  email: string;\n  password: string;\n}\n\ninterface LoginDto {\n  email: string;\n  password: string;\n}\n\ninterface SessionResponse {\n  success: boolean;\n}\n\nexport async function register(body: RegisterDto): Promise<User> {\n  const { data } = await api.post<User>('/auth/register', body);\n  return data;\n}\n\nexport async function login(body: LoginDto): Promise<User> {\n  const { data } = await api.post<User>('/auth/login', body);\n  return data;\n}\n\nexport async function logout(): Promise<void> {\n  await api.post('/auth/logout');\n}\n\n\nexport async function checkSession(): Promise<boolean> {\n  const { data } = await api.get<SessionResponse>('/auth/session');\n  return data.success;\n}\n\n// ==== User profile ====\n\nexport async function getMe(): Promise<User> {\n  const { data } = await api.get<User>('/users/me');\n  return data;\n}\n\ninterface UpdateMeDto {\n  username?: string;\n}\n\nexport async function updateMe(body: UpdateMeDto): Promise<User> {\n  const { data } = await api.patch<User>('/users/me', body);\n  return data;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAGA;AAFA;;AAqBO,eAAe,WACpB,MAAwB;IAExB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wHAAG,CAAC,GAAG,CAAqB,UAAU;QAC3D;IACF;IACA,OAAO;AACT;AAEO,eAAe,cAAc,EAAU;IAC5C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wHAAG,CAAC,GAAG,CAAO,CAAC,OAAO,EAAE,IAAI;IACnD,OAAO;AACT;AAQO,eAAe,WAAW,IAAmB;IAClD,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wHAAG,CAAC,IAAI,CAAO,UAAU;IAChD,OAAO;AACT;AAEO,eAAe,WAAW,EAAU;IACzC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wHAAG,CAAC,MAAM,CAAO,CAAC,OAAO,EAAE,IAAI;IACtD,OAAO;AACT;AAkBO,eAAe,SAAS,IAAiB;IAC9C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wHAAG,CAAC,IAAI,CAAO,kBAAkB;IACxD,OAAO;AACT;AAEO,eAAe,MAAM,IAAc;IACxC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wHAAG,CAAC,IAAI,CAAO,eAAe;IACrD,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,wHAAG,CAAC,IAAI,CAAC;AACjB;AAGO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wHAAG,CAAC,GAAG,CAAkB;IAChD,OAAO,KAAK,OAAO;AACrB;AAIO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wHAAG,CAAC,GAAG,CAAO;IACrC,OAAO;AACT;AAMO,eAAe,SAAS,IAAiB;IAC9C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wHAAG,CAAC,KAAK,CAAO,aAAa;IACpD,OAAO;AACT","debugId":null}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/AuthNavigation/AuthNavigation.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"logoutButton\": \"AuthNavigation-module__DN8toa__logoutButton\",\n  \"navigationItem\": \"AuthNavigation-module__DN8toa__navigationItem\",\n  \"navigationLink\": \"AuthNavigation-module__DN8toa__navigationLink\",\n  \"userEmail\": \"AuthNavigation-module__DN8toa__userEmail\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":["file:///Users/marina/Projects/09-auth/components/AuthNavigation/AuthNavigation.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { useAuthStore } from '@/lib/store/authStore';\nimport { logout } from '@/lib/api/clientApi';\nimport css from './AuthNavigation.module.css';\n\nexport default function AuthNavigation() {\n  const router = useRouter();\n  const { user, isAuthenticated, clearIsAuthenticated } = useAuthStore();\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      clearIsAuthenticated();\n      router.push('/sign-in');\n    } catch (error) {\n      console.error('Logout error', error);\n    }\n  };\n\n  if (!isAuthenticated) {\n    // Неавторизований користувач\n    return (\n      <>\n        <li className={css.navigationItem}>\n          <Link\n            href=\"/sign-in\"\n            prefetch={false}\n            className={css.navigationLink}\n          >\n            Login\n          </Link>\n        </li>\n        <li className={css.navigationItem}>\n          <Link\n            href=\"/sign-up\"\n            prefetch={false}\n            className={css.navigationLink}\n          >\n            Sign up\n          </Link>\n        </li>\n      </>\n    );\n  }\n\n  // Авторизований користувач\n  return (\n    <>\n      <li className={css.navigationItem}>\n        <Link\n          href=\"/profile\"\n          prefetch={false}\n          className={css.navigationLink}\n        >\n          Profile\n        </Link>\n      </li>\n\n      <li className={css.navigationItem}>\n        <p className={css.userEmail}>{user?.email}</p>\n        <button className={css.logoutButton} onClick={handleLogout}>\n          Logout\n        </button>\n      </li>\n    </>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,IAAI,EAAE,eAAe,EAAE,oBAAoB,EAAE,GAAG,IAAA,yIAAY;IAEpE,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,IAAA,iIAAM;YACZ;YACA,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;QAChC;IACF;IAEA,IAAI,CAAC,iBAAiB;QACpB,6BAA6B;QAC7B,qBACE;;8BACE,8OAAC;oBAAG,WAAW,qKAAG,CAAC,cAAc;8BAC/B,cAAA,8OAAC,uKAAI;wBACH,MAAK;wBACL,UAAU;wBACV,WAAW,qKAAG,CAAC,cAAc;kCAC9B;;;;;;;;;;;8BAIH,8OAAC;oBAAG,WAAW,qKAAG,CAAC,cAAc;8BAC/B,cAAA,8OAAC,uKAAI;wBACH,MAAK;wBACL,UAAU;wBACV,WAAW,qKAAG,CAAC,cAAc;kCAC9B;;;;;;;;;;;;;IAMT;IAEA,2BAA2B;IAC3B,qBACE;;0BACE,8OAAC;gBAAG,WAAW,qKAAG,CAAC,cAAc;0BAC/B,cAAA,8OAAC,uKAAI;oBACH,MAAK;oBACL,UAAU;oBACV,WAAW,qKAAG,CAAC,cAAc;8BAC9B;;;;;;;;;;;0BAKH,8OAAC;gBAAG,WAAW,qKAAG,CAAC,cAAc;;kCAC/B,8OAAC;wBAAE,WAAW,qKAAG,CAAC,SAAS;kCAAG,MAAM;;;;;;kCACpC,8OAAC;wBAAO,WAAW,qKAAG,CAAC,YAAY;wBAAE,SAAS;kCAAc;;;;;;;;;;;;;;AAMpE","debugId":null}},
    {"offset": {"line": 491, "column": 0}, "map": {"version":3,"sources":["file:///Users/marina/Projects/09-auth/components/TanStackProvider/TanStackProvider.tsx"],"sourcesContent":["'use client';\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactNode, useState } from 'react';\n\nexport default function TanStackProvider({ children }: { children: ReactNode }) {\n  const [client] = useState(() => new QueryClient());\n  return <QueryClientProvider client={client}>{children}</QueryClientProvider>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAHA;;;;AAKe,SAAS,iBAAiB,EAAE,QAAQ,EAA2B;IAC5E,MAAM,CAAC,OAAO,GAAG,IAAA,iNAAQ,EAAC,IAAM,IAAI,4LAAW;IAC/C,qBAAO,8OAAC,6MAAmB;QAAC,QAAQ;kBAAS;;;;;;AAC/C","debugId":null}},
    {"offset": {"line": 517, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/AuthProvider/AuthProvider.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"loaderText\": \"AuthProvider-module__1iCrKa__loaderText\",\n  \"loaderWrapper\": \"AuthProvider-module__1iCrKa__loaderWrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 525, "column": 0}, "map": {"version":3,"sources":["file:///Users/marina/Projects/09-auth/components/AuthProvider/AuthProvider.tsx"],"sourcesContent":["'use client';\n\nimport { type ReactNode, useEffect, useState } from 'react';\nimport { usePathname } from 'next/navigation';\n\nimport { checkSession, getMe } from '@/lib/api/clientApi';\nimport { useAuthStore } from '@/lib/store/authStore';\n\nimport css from './AuthProvider.module.css';\n\nconst PRIVATE_PREFIXES = ['/profile', '/notes'];\n\nfunction isPrivateRoute(pathname: string) {\n  return PRIVATE_PREFIXES.some(\n    (prefix) => pathname === prefix || pathname.startsWith(`${prefix}/`),\n  );\n}\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport default function AuthProvider({ children }: AuthProviderProps) {\n  const pathname = usePathname();\n  const { setUser, clearIsAuthenticated } = useAuthStore();\n  const [isChecking, setIsChecking] = useState(true);\n\n  useEffect(() => {\n    let ignore = false;\n\n    const verifySession = async () => {\n      try {\n        setIsChecking(true);\n\n      \n        const hasSession = await checkSession();\n\n        if (!hasSession) {\n     \n          if (!ignore) {\n            clearIsAuthenticated();\n          }\n          return;\n        }\n\n     \n        const user = await getMe();\n        if (!ignore) {\n          setUser(user);\n        }\n      } catch (error) {\n        console.error('Session check or user fetch failed', error);\n        if (!ignore) {\n          clearIsAuthenticated();\n        }\n      } finally {\n        if (!ignore) {\n          setIsChecking(false);\n        }\n      }\n    };\n\n    void verifySession();\n\n    return () => {\n      ignore = true;\n    };\n  }, [setUser, clearIsAuthenticated]);\n\n  if (isChecking && isPrivateRoute(pathname)) {\n    return (\n      <div className={css.loaderWrapper}>\n        <p className={css.loaderText}>Checking authorization…</p>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AAEA;AARA;;;;;;;AAUA,MAAM,mBAAmB;IAAC;IAAY;CAAS;AAE/C,SAAS,eAAe,QAAgB;IACtC,OAAO,iBAAiB,IAAI,CAC1B,CAAC,SAAW,aAAa,UAAU,SAAS,UAAU,CAAC,GAAG,OAAO,CAAC,CAAC;AAEvE;AAMe,SAAS,aAAa,EAAE,QAAQ,EAAqB;IAClE,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,EAAE,OAAO,EAAE,oBAAoB,EAAE,GAAG,IAAA,yIAAY;IACtD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,IAAA,kNAAS,EAAC;QACR,IAAI,SAAS;QAEb,MAAM,gBAAgB;YACpB,IAAI;gBACF,cAAc;gBAGd,MAAM,aAAa,MAAM,IAAA,uIAAY;gBAErC,IAAI,CAAC,YAAY;oBAEf,IAAI,CAAC,QAAQ;wBACX;oBACF;oBACA;gBACF;gBAGA,MAAM,OAAO,MAAM,IAAA,gIAAK;gBACxB,IAAI,CAAC,QAAQ;oBACX,QAAQ;gBACV;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sCAAsC;gBACpD,IAAI,CAAC,QAAQ;oBACX;gBACF;YACF,SAAU;gBACR,IAAI,CAAC,QAAQ;oBACX,cAAc;gBAChB;YACF;QACF;QAEA,KAAK;QAEL,OAAO;YACL,SAAS;QACX;IACF,GAAG;QAAC;QAAS;KAAqB;IAElC,IAAI,cAAc,eAAe,WAAW;QAC1C,qBACE,8OAAC;YAAI,WAAW,iKAAG,CAAC,aAAa;sBAC/B,cAAA,8OAAC;gBAAE,WAAW,iKAAG,CAAC,UAAU;0BAAE;;;;;;;;;;;IAGpC;IAEA,qBAAO;kBAAG;;AACZ","debugId":null}}]
}